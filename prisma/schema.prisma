generator kysely {
  provider  = "prisma-kysely"
  camelCase = "true"
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

model User {
  id              String    @id @default(dbgenerated("gen_random_uuid()"))
  name            String
  email           String    @unique
  hashed_password String
  profile_picture String?
  created_at      DateTime  @default(now())
  created_by      String
  updated_at      DateTime  @default(now())
  updated_by      String
  deleted_at      DateTime?
  deleted_by      String?

  detections Detection[]
}

model Detection {
  id         String          @id @default(dbgenerated("gen_random_uuid()"))
  user_id    String
  status     DetectionStatus
  diagnosis  String
  assessment String?
  body_part  String
  created_at DateTime        @default(now())
  created_by String
  updated_at DateTime        @default(now())
  updated_by String
  deleted_at DateTime?
  deleted_by String?

  user User? @relation(fields: [user_id], references: [id])
}

enum DetectionStatus {
  DIAGNOSED
  SAFE
}
